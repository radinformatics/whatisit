{% extends "main/base.html" %}
{% load crispy_forms_tags %}
{% load staticfiles %}
{% load humanize %}

{% block css %}
<link href="{% static "css/bootstrap.datatables.css"%}" media="screen" rel="stylesheet" type="text/css" />
<!--https://cdn.datatables.net/1.10.12/css/dataTables.bootstrap.min.css-->
{% endblock %}

{% block content %}
{% include 'main/message.html' %}

{% if labels %}
<div class="row">

    <div style="padding-top:50px" class="col-md-12">
        <h2>Select from Existing</h2>

                   <table id="labels" class="table table-striped table-bordered" cellspacing="0" width="100%">
                       <thead class="thead-inverse">
                           <tr>
                               <th>Label Name</th>
                               <th>Options</th>
                               <th></th>
                           </tr>
                       </thead>

                           <form action="{% url 'new_set_annotator' report_set.id %}" method="POST">
                               {% csrf_token %}
 
                               <tbody>
                               {% for label in labels %}
                                   <tr>
                                       <td>{{ label.name }}</td>
                                       <td>{{ label.option }}</td> 
                                       <td><a href="{% url 'add_label' collection.id label.id %}"><button class="btn btn-success btn-sm">Add Label</button></a>
                                   </tr>
                                {% endfor %}
                               </tbody>
                           </form>
                    </table>
                </div>
    </div>
</div>
{% endif %}


<div class="row">

    <div class="col-md-12 card">
        <br>
        <h2>Add Annotator</h2>
        <p class="alert alert-info" style="padding:5px">The users in this list have been given permission to join the collection, but are not added to this set. Adding them here will allow them to test to become part of the set annotators, and this testing will expire in {{ report_set.expire }}.</p>

        <!-- Here the user has the option to add an annotator -->
        <form action="{% url 'new_set_annotator' report_set.id %}" method="POST">

            {% csrf_token %}

            <label for="user">Contenders</label>
            <select id="user" name="user" class="form-control">
                {% for contender in contenders %}
                <option value="{{ contender.id }}">{{ contender }}</option>
                {% endfor %}
            </select>

            <div class="text-xs-center">
                <button type="submit" class="btn btn-primary">Add</button>
            </div>
        </form>
    </div>
</div>



{% endblock %}
{% block scripts %}
<script src="https://cdn.datatables.net/1.10.12/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.12/js/dataTables.bootstrap.min.js"></script>
<script>
$(document).ready(function(){
   $('#annotators').DataTable();
   $(".remove_annotator").click(function(){
      return confirm("Are you sure you want to remove this annotator? Annotations will not be lost, but the annotator will no longer be a part of the collection.");
   })
})
</script>
{% endblock %}
